# UI Polish Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Polish the visual layout, typography, and controls for a premium feel across Flipbook and Noir themes.

**Architecture:** Surgical CSS/style changes in Game.tsx and modal components. No new components, no gameplay changes. Each phase is independent and can be verified visually.

**Tech Stack:** React + Tailwind CSS + inline styles with theme tokens from `src/game/themes.ts`

**Verification:** Run `npm run dev` and test both themes in browser. Check desktop (wide) and mobile (narrow/devtools) views.

---

## Phase 1: Slider Theme Fix (Quick Win)

### Task 1.1: Add accentColor to volume slider

**Files:**
- Modify: `src/components/Game.tsx:558-565`

**Step 1: Locate the range input**

Find the volume slider around line 558-565:
```tsx
<input
  type="range"
  min={0}
  max={100}
  value={Math.round(audioSettings.volume * 100)}
  onChange={(e) => setAudioSettings((s) => ({ ...s, volume: Number(e.target.value) / 100 }))}
  style={{ width: isNoir ? '50px' : '60px' }}
/>
```

**Step 2: Add accentColor to style**

Replace the style prop:
```tsx
<input
  type="range"
  min={0}
  max={100}
  value={Math.round(audioSettings.volume * 100)}
  onChange={(e) => setAudioSettings((s) => ({ ...s, volume: Number(e.target.value) / 100 }))}
  style={{
    width: isNoir ? '50px' : '60px',
    accentColor: isNoir ? theme.accent2 : theme.accent1
  }}
/>
```

**Step 3: Verify visually**

Run: `npm run dev`
- Open browser, switch to Noir theme
- Expected: Slider thumb/track is off-white (`#f5f1ed`), not blue
- Switch to Flipbook theme
- Expected: Slider thumb/track is blue (`#1a4a7a`)

**Step 4: Commit**

```bash
git add src/components/Game.tsx
git commit -m "fix: theme-consistent volume slider color"
```

---

## Phase 2: Typography Scale

### Task 2.1: Fix hero stat labels (Score/Lv/Target)

**Files:**
- Modify: `src/components/Game.tsx:616,619,624`

**Step 1: Update Score label**

Find line ~616:
```tsx
<p className="text-[9px] uppercase tracking-wide" style={{ color: theme.uiText, opacity: 0.7 }}>Score</p>
```

Change to:
```tsx
<p className="text-xs uppercase tracking-wide" style={{ color: theme.uiText, opacity: 0.7 }}>Score</p>
```

**Step 2: Update Lv label**

Find line ~619:
```tsx
<p className="text-[9px] uppercase tracking-wide" style={{ color: theme.uiText, opacity: 0.7 }}>Lv</p>
```

Change to:
```tsx
<p className="text-xs uppercase tracking-wide" style={{ color: theme.uiText, opacity: 0.7 }}>Lv</p>
```

**Step 3: Update Target label**

Find line ~624:
```tsx
<p className="text-[9px] uppercase tracking-wide" style={{ color: theme.uiText, opacity: 0.7 }}>Target</p>
```

Change to:
```tsx
<p className="text-xs uppercase tracking-wide" style={{ color: theme.uiText, opacity: 0.7 }}>Target</p>
```

**Step 4: Verify visually**

Run: `npm run dev`
- Labels should be noticeably more readable (12px vs 9px)
- Check both themes

**Step 5: Commit**

```bash
git add src/components/Game.tsx
git commit -m "fix: increase hero stat label font size to text-xs"
```

---

### Task 2.2: Fix Last/Best labels

**Files:**
- Modify: `src/components/Game.tsx:634,654`

**Step 1: Update Last label**

Find line ~634:
```tsx
<p className="text-[9px] uppercase" style={{ color: theme.uiText, opacity: 0.6 }}>Last</p>
```

Change to:
```tsx
<p className="text-xs uppercase" style={{ color: theme.uiText, opacity: 0.6 }}>Last</p>
```

**Step 2: Update Best label**

Find line ~654:
```tsx
<p className="text-[9px] uppercase" style={{ color: theme.uiText, opacity: 0.6 }}>Best</p>
```

Change to:
```tsx
<p className="text-xs uppercase" style={{ color: theme.uiText, opacity: 0.6 }}>Best</p>
```

**Step 3: Verify and commit**

```bash
git add src/components/Game.tsx
git commit -m "fix: increase Last/Best label font size to text-xs"
```

---

### Task 2.3: Fix remaining microcopy (stats row, goals, daily, info)

**Files:**
- Modify: `src/components/Game.tsx:458,662,675,685,707`

**Step 1: Update controls label (line ~458)**

Find:
```tsx
<div className="w-full max-w-md px-2 text-[10px] landscape:hidden"
```

Change to:
```tsx
<div className="w-full max-w-md px-2 text-xs landscape:hidden"
```

**Step 2: Update stats row (line ~662)**

Find:
```tsx
<div className="flex gap-3 text-[10px] landscape:hidden"
```

Change to:
```tsx
<div className="flex gap-3 text-xs landscape:hidden"
```

**Step 3: Update session goals (line ~675)**

Find:
```tsx
<div className="text-[10px] text-center max-w-md landscape:hidden"
```

Change to:
```tsx
<div className="text-xs text-center max-w-md landscape:hidden"
```

**Step 4: Update daily challenge (line ~685)**

Find:
```tsx
<div
  className="text-[10px] text-center max-w-md p-2 rounded landscape:hidden"
```

Change to:
```tsx
<div
  className="text-xs text-center max-w-md p-2 rounded landscape:hidden"
```

**Step 5: Update game info (line ~707)**

Find:
```tsx
<p className="text-[9px] text-center max-w-xs opacity-60 landscape:hidden"
```

Change to:
```tsx
<p className="text-xs text-center max-w-xs opacity-60 landscape:hidden"
```

**Step 6: Verify and commit**

```bash
git add src/components/Game.tsx
git commit -m "fix: standardize microcopy to text-xs minimum"
```

---

## Phase 3: Background Structure

### Task 3.1: Restructure root wrapper for full-width background

**Files:**
- Modify: `src/components/Game.tsx:442-446`

**Step 1: Find current root structure**

Around line 442-446:
```tsx
return (
  <div
    className={`flex flex-col items-center ${isMobileRef.current ? 'gap-1 p-1' : 'gap-2 p-2'}`}
    style={{ background: `linear-gradient(180deg, ${theme.background} 0%, ${theme.horizon} 100%)`, minHeight: '100vh' }}
  >
```

**Step 2: Restructure to outer/inner wrapper**

Replace with:
```tsx
return (
  <div
    className="w-full min-h-[100svh] flex justify-center"
    style={{ background: `linear-gradient(180deg, ${theme.background} 0%, ${theme.horizon} 100%)` }}
  >
    <div
      className={`w-full max-w-md flex flex-col items-center ${isMobileRef.current ? 'gap-1 p-1' : 'gap-2 p-2'}`}
    >
```

**Step 3: Add closing div before final closing tag**

Find the closing `</div>` at the end of the component (around line 739) and add another `</div>` before it:
```tsx
      {/* ... existing content ... */}
    </div>
  </div>
);
```

**Step 4: Verify visually**

Run: `npm run dev`
- Desktop wide view: gradient fills entire viewport, no black sidebars
- Content stays centered at max-w-md
- Both themes should look correct

**Step 5: Commit**

```bash
git add src/components/Game.tsx
git commit -m "fix: full-width background gradient on desktop"
```

---

## Phase 4: Controls Row Improvements

### Task 4.1: Increase button min-height

**Files:**
- Modify: `src/components/Game.tsx:527,537`

**Step 1: Update Noir button minHeight**

Find line ~527:
```tsx
minHeight: '28px', // Touch-friendly minimum
```

Change to:
```tsx
minHeight: '32px', // Touch-friendly minimum
```

**Step 2: Update Flipbook button minHeight**

Find line ~537:
```tsx
minHeight: '28px', // Touch-friendly minimum
```

Change to:
```tsx
minHeight: '32px', // Touch-friendly minimum
```

**Step 3: Verify and commit**

```bash
git add src/components/Game.tsx
git commit -m "fix: increase control button height for better touch targets"
```

---

### Task 4.2: Add button hover/active states

**Files:**
- Modify: `src/components/Game.tsx:538-540`

**Step 1: Find buttonClass definitions**

Around line 538-540:
```tsx
const buttonClass = isNoir
  ? 'rounded-sm focus-visible:outline-none focus-visible:ring-1'
  : 'rounded focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-1';
```

**Step 2: Add hover and active states**

Change to:
```tsx
const buttonClass = isNoir
  ? 'rounded-sm focus-visible:outline-none focus-visible:ring-1 hover:opacity-80 active:opacity-70 transition-opacity'
  : 'rounded focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 hover:opacity-90 active:translate-y-px transition-all';
```

**Step 3: Verify visually**

- Hover over buttons, should see subtle opacity change
- Click buttons, should see feedback (opacity or slight movement)

**Step 4: Commit**

```bash
git add src/components/Game.tsx
git commit -m "fix: add hover and active states to control buttons"
```

---

### Task 4.3: Add max-w-md to controls container

**Files:**
- Modify: `src/components/Game.tsx:543`

**Step 1: Find controls container**

Around line 543:
```tsx
<div className="flex flex-wrap items-center justify-center gap-2 text-[10px]"
```

Note: text-[10px] should already be text-xs from Phase 2.

**Step 2: Add width constraints**

Change to:
```tsx
<div className="w-full max-w-md flex flex-wrap items-center justify-center gap-2 text-xs"
```

**Step 3: Verify and commit**

```bash
git add src/components/Game.tsx
git commit -m "fix: constrain controls row to max-w-md"
```

---

## Phase 5: Daily Challenge Visual Weight

### Task 5.1: Reduce Daily Challenge prominence

**Files:**
- Modify: `src/components/Game.tsx:684-690`

**Step 1: Find Daily Challenge container**

Around line 684-690:
```tsx
<div
  className="text-xs text-center max-w-md p-2 rounded landscape:hidden"
  style={{
    background: dailyChallenge.completed ? `${theme.highlight}20` : `${theme.accent3}10`,
    border: `1px solid ${dailyChallenge.completed ? theme.highlight : theme.accent3}`,
    color: theme.uiText,
  }}
>
```

**Step 2: Reduce padding and border opacity**

Change to:
```tsx
<div
  className="text-xs text-center max-w-md py-1.5 px-2 rounded landscape:hidden"
  style={{
    background: dailyChallenge.completed ? `${theme.highlight}15` : `${theme.accent3}08`,
    border: `1px solid ${dailyChallenge.completed ? theme.highlight : theme.accent3}40`,
    color: theme.uiText,
  }}
>
```

**Step 3: Verify visually**

- Daily Challenge should be visible but less prominent
- Eye should naturally go to Score first

**Step 4: Commit**

```bash
git add src/components/Game.tsx
git commit -m "fix: reduce Daily Challenge visual prominence"
```

---

## Phase 6: Spacing Rhythm

### Task 6.1: Add max-w-md to hero stats rows

**Files:**
- Modify: `src/components/Game.tsx:614,632`

**Step 1: Update hero stats row**

Find line ~614:
```tsx
<div className="flex justify-center items-end gap-6 text-center">
```

Change to:
```tsx
<div className="w-full max-w-md flex justify-center items-end gap-6 text-center">
```

**Step 2: Update secondary stats row**

Find line ~632:
```tsx
<div className="flex justify-center gap-6 text-center">
```

Change to:
```tsx
<div className="w-full max-w-md flex justify-center gap-6 text-center">
```

**Step 3: Verify and commit**

```bash
git add src/components/Game.tsx
git commit -m "fix: constrain stats rows to max-w-md for alignment"
```

---

### Task 6.2: Add max-w-md to stats row

**Files:**
- Modify: `src/components/Game.tsx:662`

**Step 1: Update stats row**

Find line ~662:
```tsx
<div className="flex gap-3 text-xs landscape:hidden"
```

Change to:
```tsx
<div className="w-full max-w-md flex justify-center gap-3 text-xs landscape:hidden"
```

**Step 2: Verify and commit**

```bash
git add src/components/Game.tsx
git commit -m "fix: constrain stats row to max-w-md"
```

---

## Phase 7: Modal Consistency

### Task 7.1: Standardize StatsOverlay backdrop

**Files:**
- Modify: `src/components/StatsOverlay.tsx:70`

**Step 1: Find backdrop style**

Around line 70:
```tsx
style={{ background: 'rgba(0,0,0,0.8)' }}
```

**Step 2: Change to standardized opacity**

Change to:
```tsx
style={{ background: 'rgba(0,0,0,0.85)' }}
```

**Step 3: Update max-height**

Find line ~74:
```tsx
className="max-w-md w-full max-h-[80vh] overflow-y-auto rounded-lg p-4"
```

Change to:
```tsx
className="max-w-md w-full max-h-[85vh] overflow-y-auto rounded-lg p-4"
```

**Step 4: Commit**

```bash
git add src/components/StatsOverlay.tsx
git commit -m "fix: standardize StatsOverlay modal backdrop"
```

---

### Task 7.2: Standardize LeaderboardScreen close button

**Files:**
- Modify: `src/components/LeaderboardScreen.tsx:66`

**Step 1: Find close button**

Around line 66:
```tsx
>
  x
</button>
```

**Step 2: Change to multiplication sign**

Change to:
```tsx
>
  Ã—
</button>
```

**Step 3: Commit**

```bash
git add src/components/LeaderboardScreen.tsx
git commit -m "fix: standardize close button character in LeaderboardScreen"
```

---

### Task 7.3: Standardize LeaderboardScreen backdrop

**Files:**
- Modify: `src/components/LeaderboardScreen.tsx:48`

**Step 1: Find backdrop style**

Around line 48:
```tsx
style={{ background: 'rgba(0,0,0,0.9)' }}
```

**Step 2: Change to standardized opacity**

Change to:
```tsx
style={{ background: 'rgba(0,0,0,0.85)' }}
```

**Step 3: Commit**

```bash
git add src/components/LeaderboardScreen.tsx
git commit -m "fix: standardize LeaderboardScreen modal backdrop"
```

---

### Task 7.4: Standardize NicknameModal backdrop

**Files:**
- Modify: `src/components/NicknameModal.tsx:83`

**Step 1: Find backdrop style**

Around line 83:
```tsx
style={{ background: 'rgba(0,0,0,0.9)' }}
```

**Step 2: Change to standardized opacity**

Change to:
```tsx
style={{ background: 'rgba(0,0,0,0.85)' }}
```

**Step 3: Commit**

```bash
git add src/components/NicknameModal.tsx
git commit -m "fix: standardize NicknameModal backdrop"
```

---

## Final Verification

### Task 8.1: Full QA pass

**Step 1: Run dev server**

```bash
npm run dev
```

**Step 2: Desktop verification**

- [ ] Background gradient fills full width (no black sidebars)
- [ ] Typography is readable (no text-[9px] anywhere)
- [ ] Button hover/active states work
- [ ] All content aligned within max-w-md column

**Step 3: Mobile verification (use devtools responsive mode)**

- [ ] Controls not cramped
- [ ] Labels readable without squinting
- [ ] Touch targets adequate (32px min)

**Step 4: Theme verification**

- [ ] Flipbook: Cohesive paper app feel
- [ ] Noir: Slider matches theme (no blue)
- [ ] Both: Modals have consistent backdrop

**Step 5: Landscape verification**

- [ ] Tertiary blocks hidden
- [ ] Layout stable

**Step 6: Final commit**

```bash
git add -A
git commit -m "chore: UI polish complete - typography, spacing, controls"
```

---

## Summary

| Phase | Tasks | Est. Time |
|-------|-------|-----------|
| 1. Slider Fix | 1 | 2 min |
| 2. Typography | 3 | 8 min |
| 3. Background | 1 | 5 min |
| 4. Controls | 3 | 8 min |
| 5. Daily Challenge | 1 | 3 min |
| 6. Spacing | 2 | 5 min |
| 7. Modals | 4 | 8 min |
| 8. QA | 1 | 5 min |
| **Total** | **16** | **~45 min** |
